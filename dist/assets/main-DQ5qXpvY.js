import{V as y,S as h,a as C,P as E,W as b,b as w}from"./stats.min-jGWFgUE6.js";new y;const r=new h;r.showPanel(0);document.body.appendChild(r.dom);const u=new C,l=new E(60,window.innerWidth/window.innerHeight,.1,1e3),i=new b;i.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(i.domElement);const B="/splats/model_56k.ply",c=new w({url:B});c.position.set(0,0,-3);u.add(c);i.setAnimationLoop(function(t){r.begin(),i.render(u,l),c&&(c.rotation.y+=.01),r.end()});let s=null,m=0;function v(){s=new PerformanceTester,s.setCallbacks((e,t)=>{x(e,t)},e=>{o(e)})}function x(e,t){const n=document.getElementById("progress-container"),a=document.getElementById("progress-fill"),d=document.getElementById("progress-text");if(e>0&&n.classList.add("visible"),a.style.width=`${Math.min(100,Math.max(0,e))}%`,d.textContent=t||`进度: ${e.toFixed(1)}%`,e>5&&m>0){const g=(Date.now()-m)/e*(100-e),f=Math.floor(g/6e4),p=Math.floor(g%6e4/1e3);document.getElementById("estimated-time").textContent=`${f}:${p.toString().padStart(2,"0")}`}}function o(e,t="info"){const n=document.getElementById("log-container"),a=document.createElement("div");a.className=`log-entry ${t}`,a.textContent=e,n.appendChild(a),n.scrollTop=n.scrollHeight;const d=n.children;d.length>20&&n.removeChild(d[0])}window.startPerformanceTest=async function(){s||v();const e=document.getElementById("start-test-btn"),t=document.getElementById("stop-test-btn");e.disabled=!0,e.classList.add("running"),e.textContent="测试进行中...",t.disabled=!1,document.getElementById("test-status").textContent="运行中",m=Date.now(),o("开始自动化性能测试...","success");try{await s.runFullTest(u,l,i,w),o("测试完成！结果文件已自动下载","success")}catch(n){o(`测试失败: ${n.message}`,"error")}finally{e.disabled=!1,e.classList.remove("running"),e.textContent="开始完整测试",t.disabled=!0,document.getElementById("test-status").textContent="完成",document.getElementById("progress-container").classList.remove("visible")}};window.stopPerformanceTest=function(){s&&(s.isRunning=!1,o("用户手动停止测试","info"))};window.toggleOverlay=function(){document.getElementById("performance-overlay").classList.toggle("minimized")};function I(){if(s){s.getStatus();const e=Object.keys(s.testResults.tests).length;document.getElementById("tested-models").textContent=`${e}/2`}}setInterval(I,1e3);window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)});o("3DGS 渲染器已加载","success");o('点击"开始完整测试"进行自动化性能分析',"info");
